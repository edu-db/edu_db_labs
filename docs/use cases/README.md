# Модель прецедентів

## 1. Діаграма прецедентів

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    left to right direction
    
    actor "Гість" as Guest
    actor "Користувач" as User
    actor "Адміністратор" as Expert
    
    usecase "Log in\nЗареєструвати обліковий запис" as UC_1
    usecase "Sign in\nУвійти в обліковий запис" as UC_2
    usecase "Log out\nВийти із обікового запису" as UC_3
    usecase "Media content management\nЗапити на пошук та експорт медіа-контенту" as UC_4
    usecase "Account management\nВнесення змін до облікових записів" as UC_5
    usecase "Getting information about users\nПереглянути інформацію щодо облікових записів користувачів" as UC_6
    
    Guest --> UC_1
    Guest --> UC_2
    Guest --> UC_3
    
    User --|> Guest
    User --> UC_4

    Expert --|> Guest
    Expert --> UC_5
    Expert --> UC_6
    
@enduml

## Схема адміністратора

@startuml

    actor "Адміністратор" as Admin

    usecase "Управління користувачами і правами доступу" as AccessRights
    usecase "Налаштування параметрів аналізу та пошуку" as SearchParameters
    usecase "Моніторинг ресурсів і продуктивності системи" as ResourceManagement
    usecase "Забезпечення безпеки даних" as SystemSecurity
    usecase "Підтримка користувачів" as UserSupport
    usecase "Моніторинг та адміністрування системи" as SystemAdministration 
    usecase "Керування базами даних" as DatabaseManagement

    Admin -u-> AccessRights
    Admin -u-> SearchParameters
    Admin -u-> ResourceManagement
    Admin -r-> SystemSecurity
    Admin --> UserSupport
    Admin --> SystemAdministration
    Admin -l-> DatabaseManagement

@enduml

## Сценарії використання для користувача

| **_ID:_**                | USER.REGISTRATION                                                              |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Реєстрація користувача в системі                                               |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач не зареєстрований у системі                                      |
|                          | 2. Користувач не війшов до системи за допомогою існуючого облікового запису    |
| **_РЕЗУЛЬТАТ:_**         | Новий обліковий запис                                                          |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач вже зареєстрований(USER.REGISTRATION_EXIST == True)              |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)                      |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)             |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Користувач|
start
: Вводить реєстраційні дані;

|Система|
: Система перевіряє передані реєстраційні дані;
note right #ffaaaa
<b>Можлива</b>
<b>USER.REGISTRATION_EXIST == True</b>
<b>USER.INJECTION_DENY</b>
<b>USER.DDOS_DENY</b>
end note

    : Система створює новий обліковий запис, використовуючи введені дані;

    : Система надає користувачу інформацію про створення облікового запису;

|Користувач|  
 : Завершує взаємодію з системою;

    stop;

@enduml


| **_ID:_**                | USER.LOG_IN                                                                    |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Вхід користувача до системи                                                    |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач зареєстрований у системі                                            |
| **_РЕЗУЛЬТАТ:_**         | Вхід в систему                                                                 |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Такого користуавача не існує (USER.REGISTRATION_EXIST == False)             |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)                      |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)             |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Користувач|
start
: Вводить дані логіну та паролю ;

|Система|
: Система перевіряє передані реєстраційні дані;
note right #ffaaaa
<b>Можлива</b>
<b>USER.REGISTRATION_EXIST == False</b>
<b>USER.INJECTION_DENY</b>
<b>USER.DDOS_DENY</b>
end note

    : Система перевіряє відповідність ідентифікаторів ;

    : Система автентифікує користувача ;

    : Система авторизує користувача;

    stop;

@enduml


| **_ID:_**                | USER.LOG_OUT                                                                   |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Вихід користувача з системи                                                    |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач зареєстрований у системі                                            |
| **_РЕЗУЛЬТАТ:_**         | Вихід з системи                                                                |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | Користувач вже вийшов з системи (USER.ONLINE == False)                         |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Користувач|
start
: Користувач надсилає запит на вихід з системи;

|Система|
: Система перевіряє передані реєстраційні дані;
note right #ffaaaa
<b>Можлива</b>
<b>USER.ONLINE == False</b>
end note

    : Система завершає поточну сессію з користувачем;

    : Система повідомляє користувача про те що він вийшов з системи;

    : Система перенаправляє користувача на головну сторінку додатку;

    stop;

@enduml

| **_ID:_**                | USER.SEARCH_REQUEST                                                            |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Користувач надає запит на знаходження інформації                               |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач авторизований в системі                                             |
| **_РЕЗУЛЬТАТ:_**         | Дані знайдено і виведено на екран користувача                                  |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Поля містять недопустимі символи (USER.INJECTION_DENY)                      |
|                          | 2. Запит порушує ліцензійну угоду з кінцевим користувачем(USER.LICENSE_DENY)   |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)             |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Користувач|
start
: Користувач відправляє запит на пошук;

|Система|
: Система виводить форму для заповнення користувачем;

|Користувач|
: Користувач заповнює форму;

|Система|
: Система проводить пошук по базам даних заданих ресурсів;
note right #ffaaaa
<b>Можлива</b>
<b>USER.INJECTION_DENY</b>
<b>USER.LICENSE_DENY</b>
<b>USER.DDOS_DENY</b>
end note

    : Система виводить результат на екран користувача;

    stop;

@enduml



| **_ID:_**                | USER.EXPORT_REQUEST                                                            |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Користувач надає запит на експорт інформації                                   |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач авторизований в системі                                          |
|                          | 2. Користувач виконав запит на пошук даних                                     |
| **_РЕЗУЛЬТАТ:_**         | Користувач експортував дані на свою систему у вигляді CSV/JSON/PDF файлу       |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Помилка у формуванні файлу (USER.EXPORT_ERROR)                              |
|                          | 2. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)             |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Користувач|
start
: Користувач обирає у якому форматі він хоче експортувати результати пошуку;

: Користувач відправляє запит на експорт інформації;

|Система|
: Система генерує файл та надсилає його як відповідь на запит;

note right #ffaaaa
<b>Можлива</b>
<b>USER.EXPORT_ERROR</b>
<b>USER.DDOS_DENY</b>
end note
|Користувач|
: Користувач отримує файл і завершує взаємодію з системою;
    stop;

@enduml

## Сценарії використання для адміністратора

| **_ID:_**                | ADMIN.USER_PASSWORD_RESET                                                      |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Зміна паролю від облікового запису                                             |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                                         |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор війшов до системи                                                |
| **_РЕЗУЛЬТАТ:_**         | Пароль облікового запису користувача змінено                                   |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач на зареєстрований (USER.REGISTRATION_EXIST == False)             |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)                      |
**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

|Адміністратор|
start
: Адміністратор надсилає запит системі на зміну паролю користувача ;

|Система|
: Система змінює пароль користувача;

note right #ffaaaa
<b>Можлива</b>
<b>USER.INJECTION_DENY</b>
<b>USER.REGISTRATION_EXIST == False</b>
end note
|Адміністратор|
: Адміністратор отримує підтвердження про успішну зміну паролю;
: Адміністратор завершує процедуру зміни паролю користувача;
    stop;

@enduml
